# Gimletlet Ereport test application
#
# This image includes the `ereportulator` task, which may be used to generate
# fake error reports to test the ereport aggregation and evacuation subsystem.
#
# Ereports may be generated using `humility hiffy` to call the
# `Ereportulator.fake_ereport` IPC operation. This takes one argument, `n`,
# which is an arbitrary `u32` value included in the ereport data payload. This
# is intended to be used to differentiate between multiple ereports during
# testing.
#
# For example:
#
#   $ humility hiffy -t gimletlet hiffy -c Ereportulator.fake_ereport -a n=42
#
name = "gimletlet-ereportlet"
inherit = "app.toml"

[tasks.jefe.config.allowed-callers]
request_reset = ["hiffy"]

[tasks.hiffy]
features = ["h753", "stm32h7", "i2c", "gpio", "spi"]
task-slots = ["sys", "i2c_driver", "user_leds", "ereportulator"]

[tasks.ereportulator]
name = "task-ereportulator"
priority = 5
start = true
task-slots = ["packrat"]
notifications = []
